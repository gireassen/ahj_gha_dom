(()=>{"use strict";var t={p:""};const e=t.p+"2dbd01ce16c0fa83cb67.png";class n{constructor(t){this.gamePlay=t,this.goblin=document.querySelector(".goblin"),this.result=document.createElement("p"),this.result.className="result",document.body.append(this.result),this.updateResult()}init(){this.goblin?(this.gamePlay.addCellClickListener(this.logicMoveGoblin.bind(this)),this.startGoblinMovement(),this.goblin.addEventListener("click",(()=>{this.logicMoveGoblin(),this.gamePlay.incrementHit(),this.updateResult(),this.startGoblinMovement()}))):console.error("Goblin not found!")}startGoblinMovement(){this.timerId&&clearInterval(this.timerId),this.timerId=setInterval((()=>{this.logicMoveGoblin(),this.gamePlay.incrementMiss(),this.updateResult(),this.gamePlay.countMiss>=5&&(clearInterval(this.timerId),alert("Game Over"))}),1e3)}onHit(){this.gamePlay.incrementHit(),this.updateResult(),this.startGoblinMovement()}logicMoveGoblin(){const t=document.querySelectorAll(".col");let e,n=Array.from(t).indexOf(this.goblin.parentElement);do{e=Math.floor(Math.random()*t.length)}while(e===n);t[e].appendChild(this.goblin)}updateResult(){this.result.innerHTML=`Результат:  \n        Попал: ${this.gamePlay.countHit}   \n        Промах: ${this.gamePlay.countMiss}`}}const i=new class{constructor(){this.container=null,this.img=e,this.cellClickListeners=[],this.countHit=0,this.countMiss=0}bindToDOM(t){if(!(t instanceof HTMLElement))throw new Error("container is not HTMLElement");this.container=t}drawUi(){document.addEventListener("DOMContentLoaded",(()=>{const t=document.createElement("table");t.className="table",document.body.append(t);for(let e=0;e<4;e++){const e=document.createElement("tr");e.className="row",t.append(e);for(let t=0;t<4;t++){const t=document.createElement("td");t.className="col",e.append(t)}}const e=document.createElement("p");e.className="result",document.body.append(e);const i=document.querySelectorAll(".col"),s=document.createElement("img");s.className="goblin",s.src=this.img,s.alt="goblin",i[0].appendChild(s);new n(this).init()}))}addCellClickListener(t){this.cellClickListeners.push(t)}onCellClick(t){const e=this.cells.indexOf(t.currentTarget);this.cellClickListeners.forEach((t=>t.call(null,e)))}incrementHit(){this.countHit+=1}incrementMiss(){this.countMiss+=1}};i.bindToDOM(document.querySelector("#game-container")),i.drawUi()})();